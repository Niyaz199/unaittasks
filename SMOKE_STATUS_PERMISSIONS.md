# Smoke-сценарий: права на смену статуса

Цель: проверить, что UI и сервер одинаково считают право `canChangeStatus`.

## Подготовка данных

1. Создать задачу `status = new`, где:
   - `assignee = engineer_a`
   - `team_members = [tech_a]`
2. Убедиться, что `chief_a` не входит в `team_members`.
3. Убедиться, что `admin_a` существует.

## Сценарии

### 1) Chief (не участник задачи)

- Открыть `/new` под `chief_a`.
- Проверить:
  - задача видна только если `chief_a` назначен или в команде (по логике страницы `Новые`);
  - кнопки статуса (`В работу`, `Пауза`, `Выполнена`) не отображаются, если `chief_a` не `assignee` и не в `team_members`.
- Проверить API:
  - `POST /api/tasks/:id/status` возвращает `403`.

### 2) Assignee

- Открыть задачу под `engineer_a`.
- Проверить:
  - в списке и карточке доступны кнопки смены статуса;
  - смена статуса проходит успешно (`200` / UI refresh).

### 3) Team member

- Открыть задачу под `tech_a`.
- Проверить:
  - в списке и карточке доступны кнопки смены статуса;
  - смена статуса проходит успешно.

### 4) Admin bypass

- Открыть задачу под `admin_a`.
- Проверить:
  - кнопки статуса доступны всегда;
  - смена статуса проходит успешно.

## Ожидаемый результат

- UI-кнопки статуса и API-права совпадают для всех 4 ролей.
- Нет кейса, когда UI показывает кнопку, но сервер стабильно возвращает `403`.
