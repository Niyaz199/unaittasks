# Smoke-сценарий: Пауза + История задачи

## 1) Валидация паузы

1. Открыть карточку задачи.
2. Нажать `Пауза`.
3. Проверить:
   - без причины (или < 5 символов) — ошибка, действие не выполняется;
   - без `resume_at` — ошибка;
   - `resume_at <= now` — ошибка.

## 2) Корректный перевод в paused

1. Заполнить причину и `resume_at` в будущем.
2. Подтвердить паузу.
3. Проверить:
   - `status = paused`;
   - `resume_at` сохранён;
   - если `due_at >= now`, новый `due_at = old_due_at + (resume_at - pause_started_at)` (проверка по журналу/meta);
   - если `due_at < now`, `due_at` не меняется;
   - в `task_comments` появился комментарий с причиной;
   - в `audit_log` есть событие `pause_task`.

## 3) Отображение paused

Проверить, что строка `Пауза до: ...` видна:
- в списке задач;
- в карточке задачи.

## 4) История (timeline)

1. Перейти в карточке задачи на вкладку `История`.
2. Проверить наличие человекочитаемых событий:
   - создание задачи;
   - взятие в работу;
   - постановка на паузу (с причиной и `resume_at`);
   - смена исполнителя;
   - изменение команды.

## 5) Права на историю

- `admin/chief/lead/engineer` — видят вкладку `История`.
- Роли вне списка — вкладка не отображается.
